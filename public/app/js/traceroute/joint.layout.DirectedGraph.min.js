/*! JointJS v0.7.0 - JavaScript diagramming library  2013-11-23 


This Source Code Form is subject to the terms of the Mozilla Public
License, v. 2.0. If a copy of the MPL was not distributed with this
file, You can obtain one at http://mozilla.org/MPL/2.0/.
 */
(function e(t,i,n){function r(s,a){if(!i[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);throw Error("Cannot find module '"+s+"'")}var c=i[s]={exports:{}};t[s][0].call(c.exports,function(e){var i=t[s][1][e];return r(i?i:e)},c,c.exports,e,t,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;n.length>s;s++)r(n[s]);return r})({1:[function(t){var e="undefined"!=typeof self?self:"undefined"!=typeof window?window:{};e.dagre=t("./index")},{"./index":2}],2:[function(t,e,i){i.Digraph=t("graphlib").Digraph,i.Graph=t("graphlib").Graph,i.layout=t("./lib/layout"),i.version=t("./lib/version")},{"./lib/layout":3,"./lib/version":18,graphlib:23}],3:[function(t,e){var i=t("./util"),n=t("./rank"),r=t("./order"),o=t("graphlib").CGraph,s=t("graphlib").CDigraph;e.exports=function(){function e(t){var e=new s;t.eachNode(function(t,i){void 0===i&&(i={}),e.addNode(t,{width:i.width,height:i.height}),i.hasOwnProperty("rank")&&(e.node(t).prefRank=i.rank)}),t.parent&&t.nodes().forEach(function(i){e.parent(i,t.parent(i))}),t.eachEdge(function(t,i,n,r){void 0===r&&(r={});var o={e:t,minLen:r.minLen||1,width:r.width||0,height:r.height||0,points:[]};e.addEdge(null,i,n,o)});var i=t.graph()||{};return e.graph({rankDir:i.rankDir||d.rankDir}),e}function a(t){var o,s=f.rankSep();try{return o=i.time("initLayoutGraph",e)(t),0===o.order()?o:(o.eachEdge(function(t,e,i,n){n.minLen*=2}),f.rankSep(s/2),i.time("rank.run",n.run)(o,d.rankSimplex),i.time("normalize",l)(o),i.time("order",r)(o,d.orderMaxSweeps),i.time("position",p.run)(o),i.time("undoNormalize",c)(o),i.time("fixupEdgePoints",h)(o),i.time("rank.restoreEdges",n.restoreEdges)(o),i.time("createFinalGraph",u)(o,t.isDirected()))}finally{f.rankSep(s)}}function l(t){var e=0;t.eachEdge(function(i,n,r,o){var s=t.node(n).rank,a=t.node(r).rank;if(a>s+1){for(var l=n,c=s+1,h=0;a>c;++c,++h){var u="_D"+ ++e,A={width:o.width,height:o.height,edge:{id:i,source:n,target:r,attrs:o},rank:c,dummy:!0};0===h?A.index=0:c+1===a&&(A.index=1),t.addNode(u,A),t.addEdge(null,l,u,{}),l=u}t.addEdge(null,l,r,{}),t.delEdge(i)}})}function c(t){t.eachNode(function(e,i){if(i.dummy){if("index"in i){var n=i.edge;t.hasEdge(n.id)||t.addEdge(n.id,n.source,n.target,n.attrs);var r=t.edge(n.id).points;r[i.index]={x:i.x,y:i.y,ul:i.ul,ur:i.ur,dl:i.dl,dr:i.dr}}t.delNode(e)}})}function h(t){t.eachEdge(function(t,e,i,n){n.reversed&&n.points.reverse()})}function u(t,e){var i=e?new s:new o;i.graph(t.graph()),t.eachNode(function(t,e){i.addNode(t,e)}),t.eachNode(function(e){i.parent(e,t.parent(e))}),t.eachEdge(function(t,e,n,r){i.addEdge(r.e,e,n,r)});var n=0,r=0;return t.eachNode(function(e,i){t.children(e).length||(n=Math.max(n,i.x+i.width/2),r=Math.max(r,i.y+i.height/2))}),t.eachEdge(function(t,e,i,o){var s=Math.max.apply(Math,o.points.map(function(t){return t.x})),a=Math.max.apply(Math,o.points.map(function(t){return t.y}));n=Math.max(n,s+o.width/2),r=Math.max(r,a+o.height/2)}),i.graph().width=n,i.graph().height=r,i}function A(t){return function(){return arguments.length?(t.apply(null,arguments),f):t()}}var d={debugLevel:0,orderMaxSweeps:r.DEFAULT_MAX_SWEEPS,rankSimplex:!1,rankDir:"TB"},p=t("./position")(),f={};return f.orderIters=i.propertyAccessor(f,d,"orderMaxSweeps"),f.rankSimplex=i.propertyAccessor(f,d,"rankSimplex"),f.nodeSep=A(p.nodeSep),f.edgeSep=A(p.edgeSep),f.universalSep=A(p.universalSep),f.rankSep=A(p.rankSep),f.rankDir=i.propertyAccessor(f,d,"rankDir"),f.debugAlignment=A(p.debugAlignment),f.debugLevel=i.propertyAccessor(f,d,"debugLevel",function(t){i.log.level=t,p.debugLevel(t)}),f.run=i.time("Total layout",a),f._normalize=l,f}},{"./order":4,"./position":9,"./rank":10,"./util":17,graphlib:23}],4:[function(t,e){function n(t,e){2>arguments.length&&(e=g);var i=d(t);i.forEach(function(e){e=e.filterNodes(function(e){return!t.children(e).length})}),p(t),u.log(2,"Order phase start cross count: "+t.graph().orderInitCC);var n,r;for(n=0,r=0;4>r&&e>n;++n,++r)s(t,i,n),c(t)&&(r=0),u.log(3,"Order phase iter "+n+" cross count: "+t.graph().orderCC);h(t),u.log(2,"Order iterations: "+n),u.log(2,"Order phase best cross count: "+t.graph().orderCC)}function r(t,e){var i={};return e.forEach(function(e){i[e]=t.inEdges(e).map(function(e){return t.node(t.source(e)).order})}),i}function o(t,e){var i={};return e.forEach(function(e){i[e]=t.outEdges(e).map(function(e){return t.node(t.target(e)).order})}),i}function s(t,e,i){0===i%2?a(t,e,i):l(t,e,i)}function a(t,e){var n;for(i=1;e.length>i;++i)n=f(e[i],n,r(t,e[i].nodes()))}function l(t,e){var n;for(i=e.length-2;i>=0;--i)f(e[i],n,o(t,e[i].nodes()))}function c(t){var e=t.graph(),i=A(t);return!("orderCC"in e)||e.orderCC>i?(e.orderCC=i,e.order={},t.eachNode(function(t,i){"order"in i&&(e.order[t]=i.order)}),!0):!1}function h(t){var e=t.graph().order;t.eachNode(function(t,i){"order"in i&&(i.order=e[t])})}var u=t("./util"),A=t("./order/crossCount"),d=t("./order/initLayerGraphs"),p=t("./order/initOrder"),f=t("./order/sortLayer");e.exports=n;var g=24;n.DEFAULT_MAX_SWEEPS=g},{"./order/crossCount":5,"./order/initLayerGraphs":6,"./order/initOrder":7,"./order/sortLayer":8,"./util":17}],5:[function(t,e){function i(t){for(var e=0,i=r.ordering(t),o=1;i.length>o;++o)e+=n(t,i[o-1],i[o]);return e}function n(t,e,i){var n=[];e.forEach(function(e){var i=[];t.outEdges(e).forEach(function(e){i.push(t.node(t.target(e)).order)}),i.sort(function(t,e){return t-e}),n=n.concat(i)});for(var r=1;i.length>r;)r<<=1;var o=2*r-1;r-=1;for(var s=[],a=0;o>a;++a)s[a]=0;var l=0;return n.forEach(function(t){var e=t+r;for(++s[e];e>0;)e%2&&(l+=s[e+1]),e=e-1>>1,++s[e]}),l}var r=t("../util");e.exports=i},{"../util":17}],6:[function(t,e){function i(t){function e(n){if(null===n)return t.children(n).forEach(function(t){e(t)}),void 0;var o=t.node(n);o.minRank="rank"in o?o.rank:Number.MAX_VALUE,o.maxRank="rank"in o?o.rank:Number.MIN_VALUE;var s=new r;return t.children(n).forEach(function(i){var n=e(i);s=r.union([s,n]),o.minRank=Math.min(o.minRank,t.node(i).minRank),o.maxRank=Math.max(o.maxRank,t.node(i).maxRank)}),"rank"in o&&s.add(o.rank),s.keys().forEach(function(t){t in i||(i[t]=[]),i[t].push(n)}),s}var i=[];e(null);var o=[];return i.forEach(function(e,i){o[i]=t.filterNodes(n(e))}),o}var n=t("graphlib").filter.nodesFromList,r=t("cp-data").Set;e.exports=i},{"cp-data":19,graphlib:23}],7:[function(t,e){function i(t){function e(e,n){"order"in n||t.children&&t.children(e).length>0||(n.rank in i||(i[n.rank]=0),n.order=i[n.rank]++)}var i=[];t.eachNode(function(t,i){e(t,i)});var r=n(t);t.graph().orderInitCC=r,t.graph().orderCC=Number.MAX_VALUE}var n=t("./crossCount");e.exports=i},{"./crossCount":5}],8:[function(t,e){function i(t,e,i){var r=[],o={};t.eachNode(function(t,e){r[e.order]=t;var s=i[t];s.length&&(o[t]=n.sum(s)/s.length)});var s=t.nodes().filter(function(t){return void 0!==o[t]});s.sort(function(e,i){return o[e]-o[i]||t.node(e).order-t.node(i).order});for(var a=0,l=0,c=s.length;c>l;++a)void 0!==o[r[a]]&&(t.node(s[l++]).order=a)}var n=t("../util");e.exports=i},{"../util":17}],9:[function(t,e){var i=t("./util");e.exports=function(){function t(t){t=t.filterNodes(i.filterNonSubgraphs(t));var e=i.ordering(t),s=n(t,e),a={};["u","d"].forEach(function(i){"d"===i&&e.reverse(),["l","r"].forEach(function(n){"r"===n&&h(e);var l=i+n,u=r(t,e,s,"u"===i?"predecessors":"successors");a[l]=o(t,e,u.pos,u.root,u.align),v.debugLevel>=3&&m(i+n,t,e,a[l]),"r"===n&&c(a[l]),"r"===n&&h(e)}),"d"===i&&e.reverse()}),l(t,e,a),t.eachNode(function(e){var i=[];for(var n in a){var r=a[n][e];f(n,t,e,r),i.push(r)}i.sort(function(t,e){return t-e}),p(t,e,(i[1]+i[2])/2)});var d=0,y="BT"===t.graph().rankDir||"RL"===t.graph().rankDir;e.forEach(function(e){var n=i.max(e.map(function(e){return A(t,e)}));d+=n/2,e.forEach(function(e){g(t,e,y?-d:d)}),d+=n/2+v.rankSep});var x=i.min(t.nodes().map(function(e){return p(t,e)-u(t,e)/2})),E=i.min(t.nodes().map(function(e){return g(t,e)-A(t,e)/2}));t.eachNode(function(e){p(t,e,p(t,e)-x),g(t,e,g(t,e)-E)})}function e(t,e){return e>t?(""+t).length+":"+t+"-"+e:(""+e).length+":"+e+"-"+t}function n(t,i){function n(t){var i=h[t];(s>i||i>l)&&(c[e(o[a],t)]=!0)}var r,o,s,a,l,c={},h={};if(2>=i.length)return c;i[1].forEach(function(t,e){h[t]=e});for(var u=1;i.length-1>u;++u){r=i[u],o=i[u+1],s=0,a=0;for(var A=0;o.length>A;++A){var d=o[A];if(h[d]=A,l=void 0,t.node(d).dummy){var p=t.predecessors(d)[0];t.node(p).dummy&&(l=h[p])}if(void 0===l&&A===o.length-1&&(l=r.length-1),void 0!==l){for(;A>=a;++a)t.predecessors(o[a]).forEach(n);s=l}}}return c}function r(t,i,n,r){var o={},s={},a={};return i.forEach(function(t){t.forEach(function(t,e){s[t]=t,a[t]=t,o[t]=e})}),i.forEach(function(i){var l=-1;i.forEach(function(i){var c,h=t[r](i);h.length>0&&(h.sort(function(t,e){return o[t]-o[e]}),c=(h.length-1)/2,h.slice(Math.floor(c),Math.ceil(c)+1).forEach(function(t){a[i]===i&&!n[e(t,i)]&&o[t]>l&&(a[t]=i,a[i]=s[i]=s[t],l=o[t])}))})}),{pos:o,root:s,align:a}}function o(t,e,n,r,o){function s(t,e,i){c[t][e]=e in c[t]?Math.min(c[t][e],i):i}function a(e){if(!(e in A)){A[e]=0;var i=e;do{if(n[i]>0){var c=r[u[i]];a(c),l[e]===e&&(l[e]=l[c]);var h=d(t,u[i])+d(t,i);l[e]!==l[c]?s(l[c],l[e],A[e]-A[c]-h):A[e]=Math.max(A[e],A[c]+h)}i=o[i]}while(i!==e)}}var l={},c={},h={},u={},A={};return e.forEach(function(t){t.forEach(function(e,i){l[e]=e,c[e]={},i>0&&(u[e]=t[i-1])})}),i.values(r).forEach(function(t){a(t)}),e.forEach(function(t){t.forEach(function(t){if(A[t]=A[r[t]],t===r[t]&&t===l[t]){var e=0;t in c&&Object.keys(c[t]).length>0&&(e=i.min(Object.keys(c[t]).map(function(e){return c[t][e]+(e in h?h[e]:0)}))),h[t]=e}})}),e.forEach(function(t){t.forEach(function(t){A[t]+=h[l[r[t]]]||0})}),A}function s(t,e,n){return i.min(e.map(function(t){var e=t[0];return n[e]}))}function a(t,e,n){return i.max(e.map(function(t){var e=t[t.length-1];return n[e]}))}function l(t,e,i){function n(t){i[u][t]+=c[u]}var r,o={},l={},c={},h=Number.POSITIVE_INFINITY;for(var u in i){var A=i[u];o[u]=s(t,e,A),l[u]=a(t,e,A);var d=l[u]-o[u];h>d&&(h=d,r=u)}["u","d"].forEach(function(t){["l","r"].forEach(function(e){var i=t+e;c[i]="l"===e?o[r]-o[i]:l[r]-l[i]})});for(u in i)t.eachNode(n)}function c(t){for(var e in t)t[e]=-t[e]}function h(t){t.forEach(function(t){t.reverse()})}function u(t,e){switch(t.graph().rankDir){case"LR":return t.node(e).height;case"RL":return t.node(e).height;default:return t.node(e).width}}function A(t,e){switch(t.graph().rankDir){case"LR":return t.node(e).width;case"RL":return t.node(e).width;default:return t.node(e).height}}function d(t,e){if(null!==v.universalSep)return v.universalSep;var i=u(t,e),n=t.node(e).dummy?v.edgeSep:v.nodeSep;return(i+n)/2}function p(t,e,i){if("LR"===t.graph().rankDir||"RL"===t.graph().rankDir){if(3>arguments.length)return t.node(e).y;t.node(e).y=i}else{if(3>arguments.length)return t.node(e).x;t.node(e).x=i}}function f(t,e,i,n){if("LR"===e.graph().rankDir||"RL"===e.graph().rankDir){if(3>arguments.length)return e.node(i)[t];e.node(i)[t]=n}else{if(3>arguments.length)return e.node(i)[t];e.node(i)[t]=n}}function g(t,e,i){if("LR"===t.graph().rankDir||"RL"===t.graph().rankDir){if(3>arguments.length)return t.node(e).x;t.node(e).x=i}else{if(3>arguments.length)return t.node(e).y;t.node(e).y=i}}function m(t,e,i,n){i.forEach(function(i,r){var o,s;i.forEach(function(i){var a=n[i];if(o){var l=d(e,o)+d(e,i);l>a-s&&console.log("Position phase: sep violation. Align: "+t+". Layer: "+r+". "+"U: "+o+" V: "+i+". Actual sep: "+(a-s)+" Expected sep: "+l)}o=i,s=a})})}var v={nodeSep:50,edgeSep:10,universalSep:null,rankSep:30},y={};return y.nodeSep=i.propertyAccessor(y,v,"nodeSep"),y.edgeSep=i.propertyAccessor(y,v,"edgeSep"),y.universalSep=i.propertyAccessor(y,v,"universalSep"),y.rankSep=i.propertyAccessor(y,v,"rankSep"),y.debugLevel=i.propertyAccessor(y,v,"debugLevel"),y.run=t,y}},{"./util":17}],10:[function(t,e,i){function n(t,e){var i=o(t);c.time("constraints.apply",d.apply)(t);var n=o(t).map(function(t){return t.value.originalEdge});c.time("acyclic",h)(t);var r=t.filterNodes(c.filterNonSubgraphs(t));u(r),f(r).forEach(function(t){var i=r.filterNodes(g.nodesFromList(t));a(i,e)}),c.time("constraints.relax",d.relax(t)),c.time("reorientEdges",s)(t),t.graph().rankRemovedEdges=i.concat(n)}function r(t){t.graph().rankRemovedEdges.forEach(function(e){t.hasEdge(e.e)&&(t.addEdge(null,t.source(e.e),t.target(e.e),t.edge(e.e)),t.delEdge(e.e)),t.addEdge(e.e,e.u,e.v,e.value)}),h.undo(t)}function o(t){var e=[];return t.eachEdge(function(i,n,r,o){n===r&&(e.push({e:i,u:n,v:r,value:o}),t.delEdge(i))}),e}function s(t){t.eachEdge(function(e,i,n,r){t.node(i).rank>t.node(n).rank&&(t.delEdge(e),r.reversed=!0,t.addEdge(e,n,i,r))})}function a(t,e){var i=A(t);e&&(c.log(1,"Using network simplex for ranking"),p(t,i)),l(t)}function l(t){var e=c.min(t.nodes().map(function(e){return t.node(e).rank}));t.eachNode(function(t,i){i.rank-=e})}var c=t("./util"),h=t("./rank/acyclic"),u=t("./rank/initRank"),A=t("./rank/feasibleTree"),d=t("./rank/constraints"),p=t("./rank/simplex"),f=t("graphlib").alg.components,g=t("graphlib").filter;i.run=n,i.restoreEdges=r},{"./rank/acyclic":11,"./rank/constraints":12,"./rank/feasibleTree":13,"./rank/initRank":14,"./rank/simplex":16,"./util":17,graphlib:23}],11:[function(t,e){function i(t){function e(r){r in n||(n[r]=i[r]=!0,t.outEdges(r).forEach(function(n){var s,a=t.target(n);r===a?console.error('Warning: found self loop "'+n+'" for node "'+r+'"'):a in i?(s=t.edge(n),t.delEdge(n),s.reversed=!0,++o,t.addEdge(n,a,r,s)):e(a)}),delete i[r])}var i={},n={},o=0;return t.eachNode(function(t){e(t)}),r.log(2,"Acyclic Phase: reversed "+o+" edge(s)"),o}function n(t){t.eachEdge(function(e,i,n,r){r.reversed&&(delete r.reversed,t.delEdge(e),t.addEdge(e,n,i,r))})}var r=t("../util");e.exports=i,e.exports.undo=n},{"../util":17}],12:[function(t,e,i){function n(t){return"min"!==t&&"max"!==t&&0!==t.indexOf("same_")?(console.error("Unsupported rank type: "+t),!1):!0}function r(t,e,i,n){t.inEdges(e).forEach(function(e){var r,o=t.edge(e);r=o.originalEdge?o:{originalEdge:{e:e,u:t.source(e),v:t.target(e),value:o},minLen:t.edge(e).minLen},n?(t.addEdge(null,i,t.source(e),r),r.reversed=!0):t.addEdge(null,t.source(e),i,r)})}function o(t,e,i,n){t.outEdges(e).forEach(function(e){var r,o=t.edge(e);r=o.originalEdge?o:{originalEdge:{e:e,u:t.source(e),v:t.target(e),value:o},minLen:t.edge(e).minLen},n?(t.addEdge(null,t.target(e),i,r),r.reversed=!0):t.addEdge(null,i,t.target(e),r)})}function s(t,e,i){void 0!==i&&t.children(e).forEach(function(e){e===i||t.outEdges(i,e).length||t.addEdge(null,i,e,{minLen:0})})}function a(t,e,i){void 0!==i&&t.children(e).forEach(function(e){e===i||t.outEdges(e,i).length||t.addEdge(null,e,i,{minLen:0})})}i.apply=function(t){function e(i){var l={};t.children(i).forEach(function(s){if(t.children(s).length)return e(s),void 0;var a=t.node(s),c=a.prefRank;if(void 0!==c){if(!n(c))return;c in l?l.prefRank.push(s):l.prefRank=[s];var h=l[c];void 0===h&&(h=l[c]=t.addNode(null,{originalNodes:[]}),t.parent(h,i)),r(t,s,h,"min"===c),o(t,s,h,"max"===c),t.node(h).originalNodes.push({u:s,value:a,parent:i}),t.delNode(s)}}),s(t,i,l.min),a(t,i,l.max)}e(null)},i.relax=function(t){var e=[];t.eachEdge(function(t,i,n,r){var o=r.originalEdge;o&&e.push(o)}),t.eachNode(function(e,i){var n=i.originalNodes;n&&(n.forEach(function(e){e.value.rank=i.rank,t.addNode(e.u,e.value),t.parent(e.u,e.parent)}),t.delNode(e))}),e.forEach(function(e){t.addEdge(e.e,e.u,e.v,e.value)})}},{}],13:[function(t,e){function i(t){function e(){var e,n=Number.POSITIVE_INFINITY;return a.forEach(function(r){if(i.has(r.u)!==i.has(r.v)){var o=s.slack(t,r.u,r.v,r.len);n>o&&(e=i.has(r.u)?{treeNode:r.v,graphNode:r.u,len:-r.len,reversed:!0,weight:r.weight}:{treeNode:r.u,graphNode:r.v,len:r.len,reversed:!1,weight:r.weight},n=o)}}),e}var i=new r(t.nodes()),a=[],l=new o,c={};t.eachEdge(function(t,e,i,r){var o=n(e,i);o in c||a.push(c[o]={u:e,v:i,len:0,weight:0});var s=c[o];s.len=Math.max(s.len,r.minLen),s.weight++});var h=t.nodes()[0];i.remove(h);var u=t.node(h);for(l.addNode(h,u),l.graph({root:h});i.size()>0;){var A=e();u=t.node(A.graphNode),i.remove(A.graphNode),l.addNode(A.graphNode,u),l.addEdge(null,A.treeNode,A.graphNode,{reversed:A.reversed,weight:A.weight}),u.rank=t.node(A.treeNode).rank+A.len}return l}function n(t,e){return e>t?t.length+":"+t+"-"+e:e.length+":"+e+"-"+t}var r=t("cp-data").Set,o=t("graphlib").Digraph,s=t("./rankUtil");e.exports=i},{"./rankUtil":15,"cp-data":19,graphlib:23}],14:[function(t,e){function i(t){var e=r(t);e.forEach(function(e){var i=t.inEdges(e);if(0===i.length)return t.node(e).rank=0,void 0;var r=i.map(function(e){return t.node(t.source(e)).rank+t.edge(e).minLen});t.node(e).rank=n.max(r)})}var n=t("../util"),r=t("graphlib").alg.topsort;e.exports=i},{"../util":17,graphlib:23}],15:[function(t,e){function i(t,e,i,n){return Math.abs(t.node(e).rank-t.node(i).rank)-n}e.exports={slack:i}},{}],16:[function(t,e){function i(t,e){for(n(t,e);;){var i=a(e);if(null===i)break;var r=l(t,e,i);c(t,e,i,r)}}function n(t,e){function i(n){var r=e.successors(n);for(var s in r){var a=r[s];i(a)}n!==e.graph().root&&o(t,e,n)}r(e),e.eachEdge(function(t,e,i,n){n.cutValue=0}),i(e.graph().root)}function r(t){function e(n){var r=t.successors(n),o=i;for(var s in r){var a=r[s];e(a),o=Math.min(o,t.node(a).low)}t.node(n).low=o,t.node(n).lim=i++}var i=0;e(t.graph().root)}function o(t,e,i){var n=e.inEdges(i)[0],r=[],o=e.outEdges(i);for(var a in o)r.push(e.target(o[a]));var l,c=0,h=0,u=0,A=0,d=0,p=t.outEdges(i);for(var f in p){var g=t.target(p[f]);for(l in r)s(e,g,r[l])&&h++;s(e,g,i)||A++}var m=t.inEdges(i);for(var v in m){var y=t.source(m[v]);for(l in r)s(e,y,r[l])&&u++;s(e,y,i)||d++}var x=0;for(l in r){var E=e.edge(o[l]).cutValue;e.edge(o[l]).reversed?x-=E:x+=E}e.edge(n).reversed?c-=x-h+u-A+d:c+=x-h+u-A+d,e.edge(n).cutValue=c}function s(t,e,i){return t.node(i).low<=t.node(e).lim&&t.node(e).lim<=t.node(i).lim}function a(t){var e=t.edges();for(var i in e){var n=e[i],r=t.edge(n);if(0>r.cutValue)return n}return null}function l(t,e,i){var n,r=e.source(i),o=e.target(i),a=e.node(o).lim<e.node(r).lim?o:r,l=!e.edge(i).reversed,c=Number.POSITIVE_INFINITY;if(l?t.eachEdge(function(r,o,l,h){if(r!==i&&s(e,o,a)&&!s(e,l,a)){var u=d.slack(t,o,l,h.minLen);c>u&&(c=u,n=r)}}):t.eachEdge(function(r,o,l,h){if(r!==i&&!s(e,o,a)&&s(e,l,a)){var u=d.slack(t,o,l,h.minLen);c>u&&(c=u,n=r)}}),void 0===n){var h=[],u=[];throw t.eachNode(function(t){s(e,t,a)?u.push(t):h.push(t)}),Error("No edge found from outside of tree to inside")}return n}function c(t,e,i,r){function o(t){var i=e.inEdges(t);for(var n in i){var r=i[n],s=e.source(r),a=e.edge(r);o(s),e.delEdge(r),a.reversed=!a.reversed,e.addEdge(r,t,s,a)}}e.delEdge(i);var s=t.source(r),a=t.target(r);o(a);for(var l=s,c=e.inEdges(l);c.length>0;)l=e.source(c[0]),c=e.inEdges(l);e.graph().root=l,e.addEdge(null,s,a,{cutValue:0}),n(t,e),h(t,e)}function h(t,e){function i(n){var r=e.successors(n);r.forEach(function(e){var r=u(t,n,e);t.node(e).rank=t.node(n).rank+r,i(e)})}i(e.graph().root)}function u(t,e,i){var n=t.outEdges(e,i);if(n.length>0)return A.max(n.map(function(e){return t.edge(e).minLen}));var r=t.inEdges(e,i);return r.length>0?-A.max(r.map(function(e){return t.edge(e).minLen})):void 0}var A=t("../util"),d=t("./rankUtil");e.exports=i},{"../util":17,"./rankUtil":15}],17:[function(t,e,i){function n(t,e){return function(){var i=(new Date).getTime();try{return e.apply(null,arguments)}finally{r(1,t+" time: "+((new Date).getTime()-i)+"ms")}}}function r(t){r.level>=t&&console.log.apply(console,Array.prototype.slice.call(arguments,1))}i.min=function(t){return Math.min.apply(Math,t)},i.max=function(t){return Math.max.apply(Math,t)},i.all=function(t,e){for(var i=0;t.length>i;++i)if(!e(t[i]))return!1;return!0},i.sum=function(t){return t.reduce(function(t,e){return t+e},0)},i.values=function(t){return Object.keys(t).map(function(e){return t[e]})},i.propertyAccessor=function(t,e,i,n){return function(r){return arguments.length?(e[i]=r,n&&n(r),t):e[i]}},i.ordering=function(t){var e=[];return t.eachNode(function(t,i){var n=e[i.rank]||(e[i.rank]=[]);n[i.order]=t}),e},i.filterNonSubgraphs=function(t){return function(e){return 0===t.children(e).length}},n.enabled=!1,i.time=n,r.level=0,i.log=r},{}],18:[function(t,e){e.exports="0.4.0"},{}],19:[function(t,e,i){i.Set=t("./lib/Set"),i.PriorityQueue=t("./lib/PriorityQueue"),i.version=t("./lib/version")},{"./lib/PriorityQueue":20,"./lib/Set":21,"./lib/version":22}],20:[function(t,e){function i(){this._arr=[],this._keyIndices={}}e.exports=i,i.prototype.size=function(){return this._arr.length},i.prototype.keys=function(){return this._arr.map(function(t){return t.key})},i.prototype.has=function(t){return t in this._keyIndices},i.prototype.priority=function(t){var e=this._keyIndices[t];return void 0!==e?this._arr[e].priority:void 0},i.prototype.min=function(){if(0===this.size())throw Error("Queue underflow");return this._arr[0].key},i.prototype.add=function(t,e){if(!(t in this._keyIndices)){var i={key:t,priority:e},n=this._arr.length;return this._keyIndices[t]=n,this._arr.push(i),this._decrease(n),!0}return!1},i.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},i.prototype.decrease=function(t,e){var i=this._keyIndices[t];if(e>this._arr[i].priority)throw Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[i].priority+" New: "+e);this._arr[i].priority=e,this._decrease(i)},i.prototype._heapify=function(t){var e=this._arr,i=2*t,n=i+1,r=t;e.length>i&&(r=e[i].priority<e[r].priority?i:r,e.length>n&&(r=e[n].priority<e[r].priority?n:r),r!==t&&(this._swap(t,r),this._heapify(r)))},i.prototype._decrease=function(t){for(var e,i=this._arr,n=i[t].priority;t>0&&(e=t>>1,!(n>i[e].priority));)this._swap(t,e),t=e},i.prototype._swap=function(t,e){var i=this._arr,n=this._keyIndices,r=i[t];i[t]=i[e],i[e]=r,n[i[t].key]=t,n[i[e].key]=e}},{}],21:[function(t,e){function i(t){if(this._size=0,this._keys={},t)for(var e=0,i=t.length;i>e;++e)this.add(t[e])}function n(t){var e,i=Object.keys(t),n=i.length,r=Array(n);for(e=0;n>e;++e)r[e]=t[i[e]];return r}e.exports=i,i.intersect=function(t){if(0===t.length)return new i;for(var e=new i(t[0].keys?t[0].keys():t[0]),n=1,r=t.length;r>n;++n)for(var o=e.keys(),s=t[n].keys?t[n]:new i(t[n]),a=0,l=o.length;l>a;++a){var c=o[a];s.has(c)||e.remove(c)}return e},i.union=function(t){for(var e=t.reduce(function(t,e){return t+(e.size?e.size():e.length)},0),n=Array(e),r=0,o=0,s=t.length;s>o;++o)for(var a=t[o],l=a.keys?a.keys():a,c=0,h=l.length;h>c;++c)n[r++]=l[c];return new i(n)},i.prototype.size=function(){return this._size},i.prototype.keys=function(){return n(this._keys)},i.prototype.has=function(t){return t in this._keys},i.prototype.add=function(t){return t in this._keys?!1:(this._keys[t]=t,++this._size,!0)},i.prototype.remove=function(t){return t in this._keys?(delete this._keys[t],--this._size,!0):!1}},{}],22:[function(t,e){e.exports="1.1.0"},{}],23:[function(t,e,i){i.Graph=t("./lib/Graph"),i.Digraph=t("./lib/Digraph"),i.CGraph=t("./lib/CGraph"),i.CDigraph=t("./lib/CDigraph"),t("./lib/graph-converters"),i.alg={isAcyclic:t("./lib/alg/isAcyclic"),components:t("./lib/alg/components"),dijkstra:t("./lib/alg/dijkstra"),dijkstraAll:t("./lib/alg/dijkstraAll"),findCycles:t("./lib/alg/findCycles"),floydWarshall:t("./lib/alg/floydWarshall"),postorder:t("./lib/alg/postorder"),preorder:t("./lib/alg/preorder"),prim:t("./lib/alg/prim"),tarjan:t("./lib/alg/tarjan"),topsort:t("./lib/alg/topsort")},i.converter={json:t("./lib/converter/json.js")};var n=t("./lib/filter");i.filter={all:n.all,nodesFromList:n.nodesFromList},i.version=t("./lib/version")},{"./lib/CDigraph":25,"./lib/CGraph":26,"./lib/Digraph":27,"./lib/Graph":28,"./lib/alg/components":29,"./lib/alg/dijkstra":30,"./lib/alg/dijkstraAll":31,"./lib/alg/findCycles":32,"./lib/alg/floydWarshall":33,"./lib/alg/isAcyclic":34,"./lib/alg/postorder":35,"./lib/alg/preorder":36,"./lib/alg/prim":37,"./lib/alg/tarjan":38,"./lib/alg/topsort":39,"./lib/converter/json.js":41,"./lib/filter":42,"./lib/graph-converters":43,"./lib/version":45}],24:[function(t,e){function i(){this._value=void 0,this._nodes={},this._edges={},this._nextId=0}function n(t,e,i){(t[e]||(t[e]=new o)).add(i)}function r(t,e,i){var n=t[e];n.remove(i),0===n.size()&&delete t[e]}var o=t("cp-data").Set;e.exports=i,i.prototype.order=function(){return Object.keys(this._nodes).length},i.prototype.size=function(){return Object.keys(this._edges).length},i.prototype.graph=function(t){return 0===arguments.length?this._value:(this._value=t,void 0)},i.prototype.hasNode=function(t){return t in this._nodes},i.prototype.node=function(t,e){var i=this._strictGetNode(t);return 1===arguments.length?i.value:(i.value=e,void 0)},i.prototype.nodes=function(){var t=[];return this.eachNode(function(e){t.push(e)}),t},i.prototype.eachNode=function(t){for(var e in this._nodes){var i=this._nodes[e];t(i.id,i.value)}},i.prototype.hasEdge=function(t){return t in this._edges},i.prototype.edge=function(t,e){var i=this._strictGetEdge(t);return 1===arguments.length?i.value:(i.value=e,void 0)},i.prototype.edges=function(){var t=[];return this.eachEdge(function(e){t.push(e)}),t},i.prototype.eachEdge=function(t){for(var e in this._edges){var i=this._edges[e];t(i.id,i.u,i.v,i.value)}},i.prototype.incidentNodes=function(t){var e=this._strictGetEdge(t);return[e.u,e.v]},i.prototype.addNode=function(t,e){if(void 0===t||null===t){do t="_"+ ++this._nextId;while(this.hasNode(t))}else if(this.hasNode(t))throw Error("Graph already has node '"+t+"'");return this._nodes[t]={id:t,value:e},t},i.prototype.delNode=function(t){this._strictGetNode(t),this.incidentEdges(t).forEach(function(t){this.delEdge(t)},this),delete this._nodes[t]},i.prototype._addEdge=function(t,e,i,r,o,s){if(this._strictGetNode(e),this._strictGetNode(i),void 0===t||null===t){do t="_"+ ++this._nextId;while(this.hasEdge(t))}else if(this.hasEdge(t))throw Error("Graph already has edge '"+t+"'");return this._edges[t]={id:t,u:e,v:i,value:r},n(o[i],e,t),n(s[e],i,t),t},i.prototype._delEdge=function(t,e,i){var n=this._strictGetEdge(t);r(e[n.v],n.u,t),r(i[n.u],n.v,t),delete this._edges[t]},i.prototype.copy=function(){var t=new this.constructor;return t.graph(this.graph()),this.eachNode(function(e,i){t.addNode(e,i)}),this.eachEdge(function(e,i,n,r){t.addEdge(e,i,n,r)}),t._nextId=this._nextId,t},i.prototype.filterNodes=function(t){var e=new this.constructor;return e.graph(this.graph()),this.eachNode(function(i,n){t(i)&&e.addNode(i,n)}),this.eachEdge(function(t,i,n,r){e.hasNode(i)&&e.hasNode(n)&&e.addEdge(t,i,n,r)}),e},i.prototype._strictGetNode=function(t){var e=this._nodes[t];if(void 0===e)throw Error("Node '"+t+"' is not in graph");return e},i.prototype._strictGetEdge=function(t){var e=this._edges[t];if(void 0===e)throw Error("Edge '"+t+"' is not in graph");return e}},{"cp-data":19}],25:[function(t,e){var i=t("./Digraph"),n=t("./compoundify"),r=n(i);e.exports=r,r.fromDigraph=function(t){var e=new r,i=t.graph();return void 0!==i&&e.graph(i),t.eachNode(function(t,i){void 0===i?e.addNode(t):e.addNode(t,i)}),t.eachEdge(function(t,i,n,r){void 0===r?e.addEdge(null,i,n):e.addEdge(null,i,n,r)}),e},r.prototype.toString=function(){return"CDigraph "+JSON.stringify(this,null,2)}},{"./Digraph":27,"./compoundify":40}],26:[function(t,e){var i=t("./Graph"),n=t("./compoundify"),r=n(i);e.exports=r,r.fromGraph=function(t){var e=new r,i=t.graph();return void 0!==i&&e.graph(i),t.eachNode(function(t,i){void 0===i?e.addNode(t):e.addNode(t,i)}),t.eachEdge(function(t,i,n,r){void 0===r?e.addEdge(null,i,n):e.addEdge(null,i,n,r)}),e},r.prototype.toString=function(){return"CGraph "+JSON.stringify(this,null,2)}},{"./Graph":28,"./compoundify":40}],27:[function(t,e){function i(){r.call(this),this._inEdges={},this._outEdges={}}var n=t("./util"),r=t("./BaseGraph"),o=t("cp-data").Set;e.exports=i,i.prototype=new r,i.prototype.constructor=i,i.prototype.isDirected=function(){return!0},i.prototype.successors=function(t){return this._strictGetNode(t),Object.keys(this._outEdges[t]).map(function(t){return this._nodes[t].id},this)},i.prototype.predecessors=function(t){return this._strictGetNode(t),Object.keys(this._inEdges[t]).map(function(t){return this._nodes[t].id},this)},i.prototype.neighbors=function(t){return o.union([this.successors(t),this.predecessors(t)]).keys()},i.prototype.sources=function(){var t=this;return this._filterNodes(function(e){return 0===t.inEdges(e).length})},i.prototype.sinks=function(){var t=this;return this._filterNodes(function(e){return 0===t.outEdges(e).length})},i.prototype.source=function(t){return this._strictGetEdge(t).u},i.prototype.target=function(t){return this._strictGetEdge(t).v},i.prototype.inEdges=function(t,e){this._strictGetNode(t);var i=o.union(n.values(this._inEdges[t])).keys();return arguments.length>1&&(this._strictGetNode(e),i=i.filter(function(t){return this.source(t)===e},this)),i},i.prototype.outEdges=function(t,e){this._strictGetNode(t);var i=o.union(n.values(this._outEdges[t])).keys();return arguments.length>1&&(this._strictGetNode(e),i=i.filter(function(t){return this.target(t)===e},this)),i},i.prototype.incidentEdges=function(t,e){return arguments.length>1?o.union([this.outEdges(t,e),this.outEdges(e,t)]).keys():o.union([this.inEdges(t),this.outEdges(t)]).keys()},i.prototype.toString=function(){return"Digraph "+JSON.stringify(this,null,2)},i.prototype.addNode=function(t,e){return t=r.prototype.addNode.call(this,t,e),this._inEdges[t]={},this._outEdges[t]={},t},i.prototype.delNode=function(t){r.prototype.delNode.call(this,t),delete this._inEdges[t],delete this._outEdges[t]},i.prototype.addEdge=function(t,e,i,n){return r.prototype._addEdge.call(this,t,e,i,n,this._inEdges,this._outEdges)},i.prototype.delEdge=function(t){r.prototype._delEdge.call(this,t,this._inEdges,this._outEdges)},i.prototype._filterNodes=function(t){var e=[];return this.eachNode(function(i){t(i)&&e.push(i)}),e}},{"./BaseGraph":24,"./util":44,"cp-data":19}],28:[function(t,e){function i(){r.call(this),this._incidentEdges={}}var n=t("./util"),r=t("./BaseGraph"),o=t("cp-data").Set;e.exports=i,i.prototype=new r,i.prototype.constructor=i,i.prototype.isDirected=function(){return!1},i.prototype.neighbors=function(t){return this._strictGetNode(t),Object.keys(this._incidentEdges[t]).map(function(t){return this._nodes[t].id},this)},i.prototype.incidentEdges=function(t,e){return this._strictGetNode(t),arguments.length>1?(this._strictGetNode(e),e in this._incidentEdges[t]?this._incidentEdges[t][e].keys():[]):o.union(n.values(this._incidentEdges[t])).keys()},i.prototype.toString=function(){return"Graph "+JSON.stringify(this,null,2)},i.prototype.addNode=function(t,e){return t=r.prototype.addNode.call(this,t,e),this._incidentEdges[t]={},t},i.prototype.delNode=function(t){r.prototype.delNode.call(this,t),delete this._incidentEdges[t]},i.prototype.addEdge=function(t,e,i,n){return r.prototype._addEdge.call(this,t,e,i,n,this._incidentEdges,this._incidentEdges)},i.prototype.delEdge=function(t){r.prototype._delEdge.call(this,t,this._incidentEdges,this._incidentEdges)}},{"./BaseGraph":24,"./util":44,"cp-data":19}],29:[function(t,e){function i(t){function e(i,n){r.has(i)||(r.add(i),n.push(i),t.neighbors(i).forEach(function(t){e(t,n)}))}var i=[],r=new n;return t.nodes().forEach(function(t){var n=[];e(t,n),n.length>0&&i.push(n)}),i}var n=t("cp-data").Set;e.exports=i},{"cp-data":19}],30:[function(t,e){function i(t,e,i,r){function o(e){var n=t.incidentNodes(e),r=n[0]!==l?n[0]:n[1],o=s[r],h=i(e),u=c.distance+h;if(0>h)throw Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+h);o.distance>u&&(o.distance=u,o.predecessor=l,a.decrease(r,u))}var s={},a=new n;i=i||function(){return 1},r=r||(t.isDirected()?function(e){return t.outEdges(e)}:function(e){return t.incidentEdges(e)}),t.nodes().forEach(function(t){var i=t===e?0:Number.POSITIVE_INFINITY;s[t]={distance:i},a.add(t,i)});for(var l,c;a.size()>0&&(l=a.removeMin(),c=s[l],c.distance!==Number.POSITIVE_INFINITY);)r(l).forEach(o);
return s}var n=t("cp-data").PriorityQueue;e.exports=i},{"cp-data":19}],31:[function(t,e){function i(t,e,i){var r={};return t.nodes().forEach(function(o){r[o]=n(t,o,e,i)}),r}var n=t("./dijkstra");e.exports=i},{"./dijkstra":30}],32:[function(t,e){function i(t){return n(t).filter(function(t){return t.length>1})}var n=t("./tarjan");e.exports=i},{"./tarjan":38}],33:[function(t,e){function i(t,e,i){var n={},r=t.nodes();return e=e||function(){return 1},i=i||(t.isDirected()?function(e){return t.outEdges(e)}:function(e){return t.incidentEdges(e)}),r.forEach(function(o){n[o]={},n[o][o]={distance:0},r.forEach(function(t){o!==t&&(n[o][t]={distance:Number.POSITIVE_INFINITY})}),i(o).forEach(function(i){var r=t.incidentNodes(i),s=r[0]!==o?r[0]:r[1],a=e(i);n[o][s].distance>a&&(n[o][s]={distance:a,predecessor:o})})}),r.forEach(function(t){var e=n[t];r.forEach(function(i){var o=n[i];r.forEach(function(i){var n=o[t],r=e[i],s=o[i],a=n.distance+r.distance;s.distance>a&&(s.distance=a,s.predecessor=r.predecessor)})})}),n}e.exports=i},{}],34:[function(t,e){function i(t){try{n(t)}catch(e){if(e instanceof n.CycleException)return!1;throw e}return!0}var n=t("./topsort");e.exports=i},{"./topsort":39}],35:[function(t,e){function i(t,e,i){function r(e,n){if(o.has(e))throw Error("The input graph is not a tree: "+t);o.add(e),t.neighbors(e).forEach(function(t){t!==n&&r(t,e)}),i(e)}var o=new n;if(t.isDirected())throw Error("This function only works for undirected graphs");r(e)}var n=t("cp-data").Set;e.exports=i},{"cp-data":19}],36:[function(t,e){function i(t,e,i){function r(e,n){if(o.has(e))throw Error("The input graph is not a tree: "+t);o.add(e),i(e),t.neighbors(e).forEach(function(t){t!==n&&r(t,e)})}var o=new n;if(t.isDirected())throw Error("This function only works for undirected graphs");r(e)}var n=t("cp-data").Set;e.exports=i},{"cp-data":19}],37:[function(t,e){function i(t,e){function i(i){var n=t.incidentNodes(i),r=n[0]!==o?n[0]:n[1],s=l.priority(r);if(void 0!==s){var c=e(i);s>c&&(a[r]=o,l.decrease(r,c))}}var o,s=new n,a={},l=new r;if(0===t.order())return s;t.eachNode(function(t){l.add(t,Number.POSITIVE_INFINITY),s.addNode(t)}),l.decrease(t.nodes()[0],0);for(var c=!1;l.size()>0;){if(o=l.removeMin(),o in a)s.addEdge(null,o,a[o]);else{if(c)throw Error("Input graph is not connected: "+t);c=!0}t.incidentEdges(o).forEach(i)}return s}var n=t("../Graph"),r=t("cp-data").PriorityQueue;e.exports=i},{"../Graph":28,"cp-data":19}],38:[function(t,e){function i(t){function e(s){var a=r[s]={onStack:!0,lowlink:i,index:i++};if(n.push(s),t.successors(s).forEach(function(t){t in r?r[t].onStack&&(a.lowlink=Math.min(a.lowlink,r[t].index)):(e(t),a.lowlink=Math.min(a.lowlink,r[t].lowlink))}),a.lowlink===a.index){var l,c=[];do l=n.pop(),r[l].onStack=!1,c.push(l);while(s!==l);o.push(c)}}if(!t.isDirected())throw Error("tarjan can only be applied to a directed graph. Bad input: "+t);var i=0,n=[],r={},o=[];return t.nodes().forEach(function(t){t in r||e(t)}),o}e.exports=i},{}],39:[function(t,e){function i(t){function e(s){if(s in r)throw new n;s in i||(r[s]=!0,i[s]=!0,t.predecessors(s).forEach(function(t){e(t)}),delete r[s],o.push(s))}if(!t.isDirected())throw Error("topsort can only be applied to a directed graph. Bad input: "+t);var i={},r={},o=[],s=t.sinks();if(0!==t.order()&&0===s.length)throw new n;return t.sinks().forEach(function(t){e(t)}),o}function n(){}e.exports=i,i.CycleException=n,n.prototype.toString=function(){return"Graph has at least one cycle"}},{}],40:[function(t,e){function i(t){function e(){t.call(this),this._parents={},this._children={"null":new n}}return e.prototype=new t,e.prototype.constructor=e,e.prototype.parent=function(t,e){if(this._strictGetNode(t),2>arguments.length)return this._parents[t];if(t===e)throw Error("Cannot make "+t+" a parent of itself");null!==e&&this._strictGetNode(e),this._children[this._parents[t]].remove(t),this._parents[t]=e,this._children[e].add(t)},e.prototype.children=function(t){return null!==t&&this._strictGetNode(t),this._children[t].keys()},e.prototype.addNode=function(e,i){return e=t.prototype.addNode.call(this,e,i),this._parents[e]=null,this._children[e]=new n,this._children[null].add(e),e},e.prototype.delNode=function(e){var i=this.parent(e);return this._children[e].keys().forEach(function(t){this.parent(t,i)},this),this._children[i].remove(e),delete this._parents[e],delete this._children[e],t.prototype.delNode.call(this,e)},e.prototype.copy=function(){var e=t.prototype.copy.call(this);return this.nodes().forEach(function(t){e.parent(t,this.parent(t))},this),e},e.prototype.filterNodes=function(e){function i(t){var e=n.parent(t);return null===e||r.hasNode(e)?(o[t]=e,e):e in o?o[e]:i(e)}var n=this,r=t.prototype.filterNodes.call(this,e),o={};return r.eachNode(function(t){r.parent(t,i(t))}),r},e}var n=t("cp-data").Set;e.exports=i},{"cp-data":19}],41:[function(t,e,i){function n(t){return Object.prototype.toString.call(t).slice(8,-1)}var r=t("../Graph"),o=t("../Digraph"),s=t("../CGraph"),a=t("../CDigraph");i.decode=function(t,e,i){if(i=i||o,"Array"!==n(t))throw Error("nodes is not an Array");if("Array"!==n(e))throw Error("edges is not an Array");if("string"==typeof i)switch(i){case"graph":i=r;break;case"digraph":i=o;break;case"cgraph":i=s;break;case"cdigraph":i=a;break;default:throw Error("Unrecognized graph type: "+i)}var l=new i;return t.forEach(function(t){l.addNode(t.id,t.value)}),l.parent&&t.forEach(function(t){t.children&&t.children.forEach(function(e){l.parent(e,t.id)})}),e.forEach(function(t){l.addEdge(t.id,t.u,t.v,t.value)}),l},i.encode=function(t){var e=[],i=[];t.eachNode(function(i,n){var r={id:i,value:n};if(t.children){var o=t.children(i);o.length&&(r.children=o)}e.push(r)}),t.eachEdge(function(t,e,n,r){i.push({id:t,u:e,v:n,value:r})});var n;if(t instanceof a)n="cdigraph";else if(t instanceof s)n="cgraph";else if(t instanceof o)n="digraph";else{if(!(t instanceof r))throw Error("Couldn't determine type of graph: "+t);n="graph"}return{nodes:e,edges:i,type:n}}},{"../CDigraph":25,"../CGraph":26,"../Digraph":27,"../Graph":28}],42:[function(t,e,i){var n=t("cp-data").Set;i.all=function(){return function(){return!0}},i.nodesFromList=function(t){var e=new n(t);return function(t){return e.has(t)}}},{"cp-data":19}],43:[function(t){var e=t("./Graph"),i=t("./Digraph");e.prototype.toDigraph=e.prototype.asDirected=function(){var t=new i;return this.eachNode(function(e,i){t.addNode(e,i)}),this.eachEdge(function(e,i,n,r){t.addEdge(null,i,n,r),t.addEdge(null,n,i,r)}),t},i.prototype.toGraph=i.prototype.asUndirected=function(){var t=new e;return this.eachNode(function(e,i){t.addNode(e,i)}),this.eachEdge(function(e,i,n,r){t.addEdge(e,i,n,r)}),t}},{"./Digraph":27,"./Graph":28}],44:[function(t,e,i){i.values=function(t){var e,i=Object.keys(t),n=i.length,r=Array(n);for(e=0;n>e;++e)r[e]=t[i[e]];return r}},{}],45:[function(t,e){e.exports="0.7.0"},{}]},{},[1]),joint.layout.DirectedGraph={layout:function(t,e){e=e||{};var i=this._prepareData(t),n=dagre.layout();e.debugLevel&&n.debugLevel(e.debugLevel),e.rankDir&&n.rankDir(e.rankDir),e.rankSep&&n.rankSep(e.rankSep),e.edgeSep&&n.edgeSep(e.edgeSep),e.nodeSep&&n.nodeSep(e.nodeSep);var r=n.run(i);return r.eachNode(function(e,i){i.dummy||t.get("cells").get(e).set("position",{x:i.x,y:i.y})}),e.setLinkVertices&&r.eachEdge(function(e,i,n,r){var o=t.get("cells").get(e);o&&t.get("cells").get(e).set("vertices",r.points)}),{width:r.graph().width,height:r.graph().height}},_prepareData:function(t){var e=new dagre.Digraph;return _.each(t.getElements(),function(t){e.hasNode(t.id)||e.addNode(t.id,{width:t.get("size").width,height:t.get("size").height,rank:t.get("rank")})}),_.each(t.getLinks(),function(t){if(!e.hasEdge(t.id)){var i=t.get("source").id,n=t.get("target").id;e.addEdge(t.id,i,n,{minLen:t.get("minLen")||1})}}),e}};